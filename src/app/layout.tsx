import type { ReactNode } from "react";
import { FogoSessionProvider, Network } from "@fogo/sessions-sdk-react";
import { NATIVE_MINT } from "@solana/spl-token";
import { Navbar } from "@/components/layout/Navbar";
import { Footer } from "@/components/layout/Footer";
import "./globals.css"; 

export const metadata = {
  title: 'Next.js',
  description: 'Generated by Next.js',
}

export default ({ children }: { children: ReactNode }) => (
  <html lang="en">
    <body>
      <FogoSessionProvider
        network={Network.Testnet}
        
        // --- THIS IS THE FIX ---
        // We are setting the domain to your production domain.
        // The old code set this to 'undefined' in production.
        domain="https://fogo-app.vercel.app"
        
        tokens={[NATIVE_MINT.toBase58(), "fUSDNGgHkZfwckbr5RLLvRbvqvRcTLdH9hcHJiq4jry"]}
        defaultRequestedLimits={{
          [NATIVE_MINT.toBase58()]: 1_500_000_000n,
          // --- THIS IS THE CORRECTED LINE ---
          // All the junk text has been removed.
          "fUSDNGgHkZfwckbr5RLLvRbvqvRcTLdH9hcHJiq4jry": 1_000_000_000n
        }}
        enableUnlimited
      >
        <Navbar />
        <hr />
        <main>
          {children}
        </main>
        <Footer />
      </FogoSessionProvider>
    </body>
  </html>
);

